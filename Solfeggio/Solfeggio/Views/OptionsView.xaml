<ContentView
	x:Class="Solfeggio.Views.OptionsView"
	xmlns="http://xamarin.com/schemas/2014/forms"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:m="clr-namespace:Ace.Markup;assembly=Ace"
	xmlns:controls="clr-namespace:Solfeggio.Controls"
	xmlns:viewModels="clr-namespace:Solfeggio.ViewModels">

	<controls:Pivot
		SelectedIndex="2">

		<controls:PivotItem
			Header="{m:Localizing Key=Telemetry}">
			<ScrollViewer>
				<StackLayout>

					<Expander
						Header="{m:Localizing Key=Signal}">

						<!--<ItemsView
							DataContext="{m:StoreBinding StoreKey=viewModels:ProcessingManager, Path=ActiveProfile}"
							ItemsSource="{StaticResource SignalSourceOptionsSet}"
							ItemTemplate="{StaticResource OptionTemplate}" />-->

						<StackLayout
							DataContext="{m:Store Key=viewModels:ProcessingManager}">
							<StackLayout
								HorizontalAlignment="Center"
								Orientation="Horizontal">

								<Label
									Text="{m:Localizing Key=Profile}" />
								<!--<Button
									Content="{m:Localizing Key=Delete}"
									CommandParameter="{m:StoreBinding Path=ActiveProfile, StoreKey=local:Generator}"
									Command="{m:Context Key=Set.Delete, StoreKey=local:Generator}" />-->
								<Picker
									DisplayMemberPath="Title"
									ItemsSource="{Binding Path=Profiles}"
									SelectedItem="{Binding Path=ActiveProfile, Mode=TwoWay}" />
								<Button
									Content="➕"
									Command="{m:Context Key=Set.Create, StoreKey=viewModels:ProcessingManager}" />

							</StackLayout>

							<controls:Pivot
								ItemsSource="{Binding Profiles}"
								SelectedItem="{Binding ActiveProfile, Mode=TwoWay}"
								ItemTemplate="{StaticResource ProfileHeaderTemplate}"
								ContentTemplate="{StaticResource ProcessingProfileTemplate}" />
						</StackLayout>

					</Expander>

					<Expander
						Header="{m:Localizing Key=Generator}">
						<StackLayout
							DataContext="{m:Store Key=viewModels:HarmonicManager}">

							<StackLayout
								HorizontalAlignment="Center"
								Orientation="Horizontal">

								<Label
									Text="{m:Localizing Key=Profile}" />
								<!--<Button
									Content="{m:Localizing Key=Delete}"
									CommandParameter="{m:StoreBinding Path=ActiveProfile, StoreKey=local:Generator}"
									Command="{m:Context Key=Set.Delete, StoreKey=local:Generator}" />-->
								<Picker
									DisplayMemberPath="Title"
									ItemsSource="{m:StoreBinding Path=Profiles, StoreKey=viewModels:HarmonicManager}"
									SelectedItem="{m:StoreBinding Path=ActiveProfile, Mode=TwoWay, StoreKey=viewModels:HarmonicManager}" />
								<Button
									Content="➕"
									Command="{m:Context Key=Set.Create, StoreKey=viewModels:HarmonicManager}" />

							</StackLayout>

							<controls:Pivot
								ItemsSource="{Binding Profiles}"
								SelectedItem="{Binding ActiveProfile, Mode=TwoWay}"
								ItemTemplate="{StaticResource ProfileHeaderTemplate}"
								ContentTemplate="{StaticResource HarmonicProfileTemplate}" />

						</StackLayout>
					</Expander>

					<Expander
						Header="{m:Localizing Key=Harmonics}">
						<ItemsView
							Name="DominatsItemsControl"
							ItemsSource="{m:StoreBinding Path=Harmonics, StoreKey=viewModels:AppViewModel}"
							ItemTemplate="{StaticResource HarmonicTemplate}" />
					</Expander>
			
				</StackLayout>
			</ScrollViewer>
		</controls:PivotItem>

		<controls:PivotItem
			Header="{m:Localizing Key=Сalibration}">
			<ScrollViewer>
				<ItemsView
					ItemsSource="{StaticResource CalibrationOptionsSet}" />
			</ScrollViewer>
		</controls:PivotItem>

		<controls:PivotItem
			Header="{m:Localizing Key=Policy}">
			<ScrollViewer>
				<StackLayout>
					<StackLayout
						Orientation="Horizontal"
						HorizontalAlignment="Center">
						<Label
							Text="{m:Localizing Key=Language}" />
						<Picker
							VerticalAlignment="Top"
							HorizontalAlignment="Right"
							Tag="{m:Localizing Key=Language}"
							ItemsSource="{m:StoreBinding Path=Languages, StoreKey=viewModels:AppViewModel}"
							SelectedItem="{m:StoreBinding Path=ActiveLanguage, Mode=TwoWay, StoreKey=viewModels:AppViewModel}" />
					</StackLayout>
					
					<Label
						FontSize="14"
						FontWeight="Medium"
						TextWrapping="Wrap"
						HorizontalAlignment="Center"
						Text="{m:Localizing Key=PolicyMessage}" />

					<Button
						FontSize="13"
						HorizontalAlignment="Center"
						CommandParameter="{m:Localizing Key=IAmReadyToHelpLink}"
						Command="{m:Context Key=Navigate, StoreKey=viewModels:AppViewModel}"
						Content="{m:Localizing Key=IAmReadyToHelpMessage}"/>
					
					<Label
						FontSize="10"
						Text="{m:Localizing Key=DesignedByMessage}" />
				</StackLayout>
			</ScrollViewer>
		</controls:PivotItem>

	</controls:Pivot>

</ContentView>